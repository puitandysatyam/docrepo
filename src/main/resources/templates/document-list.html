<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments :: common_head('Documents')}"></head>

<body class="bg-gray-100 flex flex-col min-h-screen">
<nav th:replace="~{fragments :: navbar}"></nav>

<main class="flex-grow container mx-auto px-4 py-8">
  <div class="max-w-4xl mx-auto bg-white p-8 rounded-xl shadow-lg">
    <h1 class="text-3xl font-bold text-gray-800 mb-6" th:text="${pageTitle}">Document List</h1>

    <!-- Display success/error messages from redirects -->
    <div th:if="${successMessage}" class="mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg" role="alert">
      <p th:text="${successMessage}"></p>
    </div>
    <div th:if="${errorMessage}" class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg" role="alert">
      <p th:text="${errorMessage}"></p>
    </div>

    <!-- Message if no documents are found -->
    <div th:if="${#lists.isEmpty(documents)}">
      <p class="text-gray-500">No documents found.</p>
    </div>

    <!-- List of documents -->
    <div th:unless="${#lists.isEmpty(documents)}" class="space-y-4">
      <!--
        KEY CHANGE: Each document is now a clickable <a> tag that links to the new detail page.
        The URL is dynamically created using the document's ID.
      -->
      <a th:each="doc : ${documents}"
         th:href="@{/documents/{id}(id=${doc.id})}"
         class="block p-4 border rounded-lg hover:bg-gray-50 transition duration-150 ease-in-out">
        <div>
          <h3 class="text-lg font-semibold text-indigo-700" th:text="${doc.title}">Document Title</h3>
          <p class="text-sm text-gray-500">Topic: <span class="font-medium" th:text="${doc.topic}">Topic</span></p>
          <p class="text-sm text-gray-500">Uploaded by: <span class="font-medium" th:text="${doc.facultyName}">Faculty Name</span></p>
        </div>
      </a>
    </div>
  </div>
</main>

<footer th:replace="~{fragments :: footer}"></footer>
</body>
</html>
